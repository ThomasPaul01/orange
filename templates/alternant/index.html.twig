{% extends 'base.html.twig' %}

{% block title %}Offres d'Employeurs{% endblock %}

{% block stylesheets %}
    <style>
        .offers-container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 40px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        h2 {
            text-align: center;
            color: #FF6A13;
            margin-bottom: 30px;
        }

        .filters {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .filters select,
        .filters input {
            padding: 12px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 100%;
            max-width: 300px;
            transition: border-color 0.3s;
        }

        .filters select:focus,
        .filters input:focus {
            border-color: #FF6A13;
            outline: none;
        }

        .offers-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .offer-card {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }

        .offer-card:hover {
            transform: translateY(-5px);
        }

        .offer-card h3 {
            color: #FF6A13;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .offer-card p {
            font-size: 1rem;
            color: #333;
            margin-bottom: 15px;
        }

        .offer-card .company-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 15px;
        }

        /* Aligner le bouton à droite */
        .offer-card .btn-apply {
            background: #FF6A13;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 16px;
            transition: background 0.3s;
            display: inline-block;
            margin-left: auto;  /* Ceci aligne le bouton à droite */
        }

        .no-results {
            text-align: center;
            font-size: 1.2rem;
            color: #999;
        }

        /* Nouveau style pour le badge RSE */
        .rse-badge {
            display: inline-block;
            background-color: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            margin-top: 10px;
        }
    </style>
{% endblock %}

{% block header_title %}
    <img src="{{ asset('images/next-talent.png') }}" alt="Logo" onclick="window.location.href='{{ path('app_accueil') }}'">
    <!-- Affichage du bouton de déconnexion -->
    <div class="container d-flex justify-content-between align-items-center">
        <!-- Logo ou Titre -->
        <h1 class="text-orange"></h1>

        <!-- Navigation -->
        <nav>
            <a href="" class="header-btn">Mon profil</a>
            <a href="{{ path('alternant_questionnaire') }}" class="header-btn">Mes préferences</a>
            <a href="{{ path('app_accueil') }}" class="header-btn">Retour à l'accueil</a>
            <a href="{{ path('app_accueil') }}" class="header-btn logout">Déconnexion</a>
        </nav>
    </div>
{% endblock %}

{% block content %}
    <div class="offers-container">
        <h2>Offres d'Employeurs</h2>

        <!-- Filtres -->
        <div class="filters">
            <select id="handicap-filter" aria-label="Filtrer par type de handicap">
                <option value="">Sélectionnez un handicap</option>
                <option value="moteur">Handicap moteur</option>
                <option value="visuel">Handicap visuel</option>
                <option value="auditif">Handicap auditif</option>
                <option value="cognitif">Handicap cognitif</option>
            </select>

            <input type="text" id="keyword-filter" placeholder="Recherche par mot-clé" aria-label="Filtrer par mot-clé">
        </div>

        <!-- Liste des offres -->
        <div id="offers-list" class="offers-list">
            <div class="offer-card" data-region="Île-de-France" data-type="alternance" data-duration="6mois" data-rhythm="1semaineEntreprise1semaineEcole" data-domain="informatique" data-visio="oui" data-level="Bac+2">
                <img src="{{ asset('images/next-talent.png') }}" alt="Tech Innovators" class="company-logo">
                <h3>Alternance - Développeur Full Stack</h3>
                <div class="badges">
                   <img src="{{ asset('images/badgeMoteur.png') }}" alt="badge Moteur">
                    <img src="{{ asset('images/badgeVisuel.png') }}" alt="badge Visuel">
                    <img src="{{ asset('images/badgeAuditif.png') }}" alt="badge Auditif">
                </div>

                <p><strong>Entreprise:</strong> Tech Innovators</p>
                <p><strong>Durée:</strong> 6 mois</p>
                <p><strong>Rythme:</strong> 1 semaine en entreprise, 1 semaine à l'école</p>
                <p><strong>Domaine:</strong> Informatique</p>
                <p><strong>Visio possible:</strong> Oui</p>
                <p><strong>Niveau d'étude:</strong> Bac+2</p>
                <a href="#" class="btn-apply">Postuler</a>
            </div>

            <div class="offer-card" data-region="Île-de-France" data-type="alternance" data-duration="6mois" data-rhythm="1semaineEntreprise1semaineEcole" data-domain="informatique" data-visio="oui" data-level="Bac+2">
                <img src="{{ asset('images/next-talent.png') }}" alt="CodeCraft" class="company-logo">
                <h3>Alternance - Développeur Backend</h3>
                <div class="badges">
                    <img src="{{ asset('images/badgeMoteur.png') }}" alt="badge Moteur">
                    <img src="{{ asset('images/badgeAuditif.png') }}" alt="badge Auditif">
                </div>

                <p><strong>Entreprise:</strong> CodeCraft</p>
                <p><strong>Durée:</strong> 6 mois</p>
                <p><strong>Rythme:</strong> 1 semaine en entreprise, 1 semaine à l'école</p>
                <p><strong>Domaine:</strong> Informatique</p>
                <p><strong>Visio possible:</strong> Oui</p>
                <p><strong>Niveau d'étude:</strong> Bac+2</p>
                <a href="#" class="btn-apply">Postuler</a>
            </div>

            <div class="offer-card" data-region="Île-de-France" data-type="alternance" data-duration="6mois" data-rhythm="1semaineEntreprise1semaineEcole" data-domain="informatique" data-visio="oui" data-level="Bac+2">
                <img src="{{ asset('images/logo.png') }}" alt="DevSphere" class="company-logo">
                <h3>Alternance - Développeur Frontend</h3>
                <div class="badges">
                    <img src="{{ asset('images/badgeMental.png') }}" alt="badge Mental">
                    <img src="{{ asset('images/badgeMoteur.png') }}" alt="badge Moteur">
                </div>

                <p><strong>Entreprise:</strong> DevSphere</p>
                <p><strong>Durée:</strong> 6 mois</p>
                <p><strong>Rythme:</strong> 1 semaine en entreprise, 1 semaine à l'école</p>
                <p><strong>Domaine:</strong> Informatique</p>
                <p><strong>Visio possible:</strong> Oui</p>
                <p><strong>Niveau d'étude:</strong> Bac+2</p>
                <a href="#" class="btn-apply">Postuler</a>
            </div>

            <div class="offer-card" data-region="Île-de-France" data-type="alternance" data-duration="6mois" data-rhythm="1semaineEntreprise1semaineEcole" data-domain="informatique" data-visio="oui" data-level="Bac+2">
                <img src="{{ asset('images/next-talent.png') }}" alt="ByteLabs" class="company-logo">
                <h3>Alternance - Développeur Mobile</h3>
                <div class="badges">
                    <img src="{{ asset('images/badgeMental.png') }}" alt="badge Mental">
                   </div>

                <p><strong>Entreprise:</strong> ByteLabs</p>
                <p><strong>Durée:</strong> 6 mois</p>
                <p><strong>Rythme:</strong> 1 semaine en entreprise, 1 semaine à l'école</p>
                <p><strong>Domaine:</strong> Informatique</p>
                <p><strong>Visio possible:</strong> Oui</p>
                <p><strong>Niveau d'étude:</strong> Bac+2</p>
                <a href="#" class="btn-apply">Postuler</a>
            </div>

            <div class="offer-card" data-region="Île-de-France" data-type="alternance" data-duration="6mois" data-rhythm="1semaineEntreprise1semaineEcole" data-domain="informatique" data-visio="oui" data-level="Bac+2">
                <img src="{{ asset('images/next-talent.png') }}" alt="InnovaTech" class="company-logo">
                <h3>Alternance - Développeur Data</h3>
                <div class="badges">
                    <img src="{{ asset('images/badgeMental.png') }}" alt="badge Mental">
                    <img src="{{ asset('images/badgeMoteur.png') }}" alt="badge Moteur">
                    <img src="{{ asset('images/badgeAuditif.png') }}" alt="badge Auditif">
                </div>

                <p><strong>Entreprise:</strong> InnovaTech</p>
                <p><strong>Durée:</strong> 6 mois</p>
                <p><strong>Rythme:</strong> 1 semaine en entreprise, 1 semaine à l'école</p>
                <p><strong>Domaine:</strong> Informatique</p>
                <p><strong>Visio possible:</strong> Oui</p>
                <p><strong>Niveau d'étude:</strong> Bac+2</p>
                <a href="#" class="btn-apply">Postuler</a>
            </div>

            <!-- D'autres cartes d'offres ici... -->

        </div>

        <!-- Aucune offre trouvée -->
        <div class="no-results" style="display:none;">Aucune offre ne correspond à vos critères.</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const handicapFilter = document.getElementById('handicap-filter');
            const keywordFilter = document.getElementById('keyword-filter');
            const offerCards = document.querySelectorAll('.offer-card');
            const noResults = document.querySelector('.no-results');

            function filterOffers() {
                const keyword = keywordFilter.value.toLowerCase();
                const handicap = handicapFilter.value;

                let visibleOffers = 0;

                offerCards.forEach(offer => {
                    const title = offer.querySelector('h3').textContent.toLowerCase();
                    const company = offer.querySelector('p').textContent.toLowerCase();
                    const offerHandicap = offer.getAttribute('data-handicap');

                    const matchesKeyword = title.includes(keyword) || company.includes(keyword);
                    const matchesHandicap = handicap === '' || offerHandicap === handicap;

                    if (matchesKeyword && matchesHandicap) {
                        offer.style.display = 'block';
                        visibleOffers++;
                    } else {
                        offer.style.display = 'none';
                    }
                });

                if (visibleOffers === 0) {
                    noResults.style.display = 'block';
                } else {
                    noResults.style.display = 'none';
                }
            }

            handicapFilter.addEventListener('change', filterOffers);
            keywordFilter.addEventListener('input', filterOffers);

            // Initial filter check
            filterOffers();
        });
    </script>
{% endblock %}
